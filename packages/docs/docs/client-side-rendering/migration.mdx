---
image: /generated/articles-docs-client-side-rendering-migration.png
sidebar_label: Migration
title: Migrating code to client-side rendering
crumb: 'FAQ'
---

:::warning
Very experimental feature - expect bugs and breaking changes at any time.  
[Track progress on GitHub](https://github.com/remotion-dev/remotion/issues/5913) and discuss in the [`#web-renderer`](https://remotion.dev/discord) channel on Discord.
:::

We try to support as much code that was written for [server-side rendering](/docs/ssr) as possible.  
Some code is unsupported or may need changing.

You may start future-proofing your code now if you are interested in using [client-side rendering](/docs/client-side-rendering) in the future.

## Use `useRemotionEnvironment()` instead of `getRemotionEnvironment()`

[`getRemotionEnvironment()`](/docs/get-remotion-environment) is a global API that may conflict with other Remotion instances in your project, such as when you have a [`<Player>`](/docs/player) mounted on the same page.

Start using the [`useRemotionEnvironment()`](/docs/use-remotion-environment) hook instead.

## Use `useDelayRender()` instead of `delayRender()`, `continueRender()` and `cancelRender()`

If you have multiple renders at the same time or another instance of Remotion on the same page, such as a `<Player>`, the [`delayRender()`](/docs/delay-render), [`continueRender()`](/docs/continue-render) and [`cancelRender()`](/docs/cancel-render) functions may conflict.

Start using the [`useDelayRender()`](/docs/use-delay-render) hook instead, which scopes these functions to a composition.

## Ensure assets are available via CORS

Unlike server-side rendering, where video and audio assets are downloaded in a Node.js process, and where images can be captured even if they are [tainted](https://developer.mozilla.org/en-US/docs/Web/HTML/How_to/CORS_enabled_image#security_and_tainted_canvases), in client-side rendering, CORS is enforced and images and canvas may not be tainted.

### Why CORS is required

Client-side rendering draws images to a `<canvas>` element. For security reasons, browsers restrict access to image data from different origins. If an image from another domain is drawn to a canvas without proper CORS headers, the canvas becomes "tainted" and its contents cannot be extracted.

### Common error messages

If you use an image that doesn't support CORS, you'll see an error like:

```
Could not draw image with src="https://example.com/image.png" to canvas:
The image is tainted due to CORS restrictions.
The server hosting this image must respond with the "Access-Control-Allow-Origin" header.
```

If an image fails to load entirely (e.g., 404 error, invalid URL), you'll see:

```
Could not draw image with src="https://example.com/image.png" to canvas:
The image is in a broken state.
This usually means the image failed to load - check that the URL is valid and accessible.
```

### Solutions

1. **Host images with CORS headers**: Ensure your image server responds with `Access-Control-Allow-Origin: *` or a specific origin.

2. **Self-host images**: Download remote images and serve them from your own domain.

3. **Use a CORS proxy**: Route requests through a proxy that adds CORS headers.

## Use `@remotion/media`

The only video and audio tags that are supported are [`<Video>`](/docs/media/video) and [`<Audio>`](/docs/media/audio) from `@remotion/media`.  
Migrate any `Html5Video`, `Html5Audio` and `<OffthreadVideo>` tags to [`<Video>`](/docs/media/video) and [`<Audio>`](/docs/media/audio).
